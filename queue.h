#ifndef QUEUE_H  // Защита от повторного включения (include guard)
#define QUEUE_H  // Определяем QUEUE_H, чтобы при повторном включении пропустить содержимое

#include <stddef.h>  // Для типа size_t (беззнаковый целый тип для хранения размеров)

/*
 * ОЧЕРЕДЬ (QUEUE) - структура данных типа FIFO (First In, First Out)
 * Реализована как односвязный список
 */

/* 
 * УЗЕЛ ОЧЕРЕДИ (QueueNode)
 * Базовый элемент очереди, содержит:
 * - данные (значение)
 * - указатель на следующий узел
 */
typedef struct QueueNode {
    int value;                    // Хранимое целочисленное значение
    struct QueueNode *next;       // Указатель на следующий узел в очереди
} QueueNode;

/*
 * СТРУКТУРА ОЧЕРЕДИ (Queue)
 * Управляющая структура, содержит:
 * - указатель на начало очереди (голову)
 * - указатель на конец очереди (хвост)
 * - текущий размер очереди
 */
typedef struct Queue {
    QueueNode *head;  // Указатель на первый элемент (для извлечения)
    QueueNode *tail;  // Указатель на последний элемент (для добавления)
    size_t size;      // Количество элементов в очереди
} Queue;

/* ==================== БАЗОВЫЕ ОПЕРАЦИИ ==================== */

/*
 * Инициализация очереди
 * Подготавливает структуру Queue к использованию
 * Параметры:
 *   q - указатель на структуру Queue
 */
void queue_init(Queue *q);

/*
 * Добавление элемента в конец очереди (enqueue)
 * Временная сложность: O(1)
 * Параметры:
 *   q - указатель на очередь
 *   value - значение для добавления
 * Возвращает:
 *   0 - успех, -1 - ошибка (например, нехватка памяти)
 */
int queue_push(Queue *q, int value);

/*
 * Извлечение элемента из начала очереди (dequeue)
 * Временная сложность: O(1)
 * Параметры:
 *   q - указатель на очередь
 *   value - указатель для сохранения извлеченного значения
 * Возвращает:
 *   0 - успех, -1 - ошибка (очередь пуста)
 */
int queue_pop(Queue *q, int *value);

/*
 * Освобождение памяти, занятой очередью
 * Параметры:
 *   q - указатель на очередь
 */
void queue_free(Queue *q);

/*
 * Вывод содержимого очереди в стандартный поток вывода
 * Параметры:
 *   q - указатель на очередь (константный, очередь не изменяется)
 */
void queue_print(const Queue *q);

/* ==================== ДОПОЛНИТЕЛЬНЫЕ ОПЕРАЦИИ ==================== */

/*
 * Изменение значения элемента по индексу
 * Временная сложность: O(n) в худшем случае
 * Параметры:
 *   q - указатель на очередь
 *   index - позиция элемента (0-based)
 *   new_value - новое значение
 * Возвращает:
 *   0 - успех, -1 - ошибка (неверный индекс)
 */
int queue_edit_at(Queue *q, size_t index, int new_value);

/*
 * Сортировка очереди методом прямого выбора (selection sort)
 * Алгоритмическая сложность: O(n²)
 * Параметры:
 *   q - указатель на очередь
 */
void queue_selection_sort(Queue *q);

/*
 * Сортировка очереди методом быстрой сортировки (quick sort)
 * Алгоритмическая сложность: O(n log n) в среднем, O(n²) в худшем случае
 * Параметры:
 *   q - указатель на очередь
 */
void queue_quick_sort(Queue *q);

/*
 * Создание глубокой копии очереди
 * Возвращает:
 *   указатель на новую очередь или NULL при ошибке
 */
Queue* queue_copy(const Queue *q);

/*
 * Проверка очереди на пустоту
 * Возвращает:
 *   1 - очередь пуста, 0 - очередь содержит элементы
 */
int queue_is_empty(const Queue *q);

#endif  // Конец защиты от повторного включения